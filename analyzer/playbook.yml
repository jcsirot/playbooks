---
- hosts: ubuntu:&analyzer
  vars:
    # openssl passwd -salt salty -1 wireshark
    wireshark_password: $1$salty$7jpBSJ1B8gIX/lHcNH/bw.
  tasks:
  - apt:
      name={{ item }}
      state=present
    with_items:
    - isc-dhcp-server
    - vnc4server
    - xrdp
    - wireshark
    - fluxbox
# wireshark user setup
  - user:
      name=wireshark
      state=present
      password={{ wireshark_password }}
      shell=/bin/bash
  - copy:
      src={{ item.src }}
      dest={{ item.dest }}
      owner=wireshark
      group=wireshark
      mode=700
    with_items:
    - { src: xsession, dest: /home/wireshark/.xsession }
    - { src: menu, dest: /home/wireshark/.fluxbox/menu }

# TODO: dhcp server setup -- https://help.ubuntu.com/community/isc-dhcp-server
