---
- hosts: debian:&nexus
  tasks:
  - user:
      name=nexus
      state=present
      shell=/bin/bash
  - get_url:
      url=http://download.sonatype.com/nexus/oss/nexus-2.11.1-01-bundle.tar.gz
      dest=/home/nexus/
    sudo: yes
    sudo_user: nexus
  - unarchive:
      copy=no
      src=/home/nexus/nexus-2.11.1-01-bundle.tar.gz
      dest=/home/nexus/
    sudo: yes
    sudo_user: nexus
  - file:
      src=/home/nexus/nexus-2.11.1-01/bin/nexus
      dest=/etc/init.d/nexus
      state=link
  - apt:
      name=openjdk-7-jre
      state=present
  - service:
      name=nexus
      state=started

# doc: http://books.sonatype.com/nexus-book/reference/install.html
